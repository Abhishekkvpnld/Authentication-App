{"ast":null,"code":"import axios from \"axios\";\nimport { jwtDecode } from 'jwt-decode';\n\n/********Setting baseUrl********/\naxios.defaults.baseURL = process.env.BACKEND_SERVER_DOMAIN; //Back end \n\n/**Make api Requests */\n\n/**To get user name from Token */\nexport async function getUsername() {\n  const token = localStorage.getItem('token');\n  if (!token) return Promise.reject('Cannot find Token');\n  let decode = jwtDecode(token);\n  // console.log(\"decode   \"+decode)\n  return decode;\n}\n\n/**Authenticate function */\nexport async function authenticate(username) {\n  try {\n    return await axios.post('/api/authenticate', {\n      username\n    });\n  } catch (error) {\n    return {\n      error: \"Username doesn't exist...!\"\n    };\n  }\n}\n\n/**get user details */\nexport async function getUser({\n  username\n}) {\n  try {\n    const {\n      data\n    } = await axios.get(`/api/user/${username}`);\n    return {\n      data\n    };\n  } catch (error) {\n    return {\n      error: \"Password doesn't match...!\"\n    };\n  }\n}\n\n/**register user function */\nexport async function registerUser(credential) {\n  try {\n    const {\n      data: {\n        msg\n      },\n      status\n    } = await axios.post(`/api/register`, credential);\n    let {\n      username,\n      email\n    } = credential;\n\n    /**send email */\n    if (status === 201) {\n      await axios.post('/api/registerMail', {\n        username,\n        userEmail: email,\n        text: msg\n      });\n    }\n  } catch (error) {\n    return Promise.reject({\n      error\n    });\n  }\n}\n\n/**Login function */\nexport async function verifyPassword({\n  username,\n  password\n}) {\n  try {\n    if (username) {\n      const {\n        data\n      } = await axios.post('/api/login', {\n        username,\n        password\n      });\n      console.log(data);\n      return Promise.resolve({\n        data\n      });\n    }\n  } catch (error) {\n    return Promise.reject({\n      error: \"Password doesn't Match...!\"\n    });\n  }\n}\n\n/**update user profile function */\nexport async function updateUser(updateData) {\n  // console.log(response);\n  try {\n    const token = localStorage.getItem('token');\n    // const config = {\n    //     headers: {\n    //         \"Authorization\" : `Bearer ${token}` // Assuming 'token' is the authorization token\n    //     },\n    //   };\n    const response = await axios.put('/api/updateUser', updateData, {\n      headers: {\n        \"Authorization\": `Bearer ${token}`\n      }\n    });\n    console.log('response' + response);\n    return Promise.resolve({\n      response\n    });\n  } catch (error) {\n    return Promise.reject({\n      error: \"Couldn't update Profile...!\"\n    });\n  }\n}\n\n/**generate OTP */\nexport async function generateOTP(username) {\n  try {\n    const {\n      data: {\n        code\n      },\n      status\n    } = await axios.get('/api/generateOTP', {\n      params: {\n        username\n      }\n    });\n    // /**send mail with OTP */\n    if (status === 201) {\n      let {\n        data\n      } = await getUser({\n        username\n      });\n      let text = `Your password Recovery OTP is ${code}.Verify and recover your password.`;\n      await axios.post('/api/registerMail', {\n        username,\n        userEmail: data.data.email,\n        text,\n        subject: \"Password Recovery OTP\"\n      });\n    }\n    return Promise.resolve(code);\n  } catch (error) {\n    return Promise.reject({\n      error\n    });\n  }\n}\n\n/**verify OTP */\nexport async function verifyOTP({\n  username,\n  code\n}) {\n  try {\n    const {\n      data,\n      status\n    } = await axios.get('/api/verifyOTP', {\n      params: {\n        username,\n        code\n      }\n    });\n    return {\n      data,\n      status\n    };\n  } catch (error) {\n    return Promise.reject(error);\n  }\n}\n\n/**reset password */\nexport async function resetPassword({\n  username,\n  password\n}) {\n  try {\n    const {\n      data,\n      status\n    } = await axios.put('/api/resetPassword', {\n      username,\n      password\n    });\n    return Promise.resolve({\n      data,\n      status\n    });\n  } catch (error) {\n    return Promise.reject({\n      error\n    });\n  }\n}","map":{"version":3,"names":["axios","jwtDecode","defaults","baseURL","process","env","BACKEND_SERVER_DOMAIN","getUsername","token","localStorage","getItem","Promise","reject","decode","authenticate","username","post","error","getUser","data","get","registerUser","credential","msg","status","email","userEmail","text","verifyPassword","password","console","log","resolve","updateUser","updateData","response","put","headers","generateOTP","code","params","subject","verifyOTP","resetPassword"],"sources":["C:/Users/JISHN/Documents/projects/Authentication app/client/src/helper/helper.jsx"],"sourcesContent":["import axios from \"axios\";\r\nimport { jwtDecode } from 'jwt-decode';\r\n\r\n/********Setting baseUrl********/\r\naxios.defaults.baseURL = process.env.BACKEND_SERVER_DOMAIN     //Back end \r\n\r\n/**Make api Requests */\r\n\r\n\r\n/**To get user name from Token */\r\nexport async function getUsername(){\r\n    const token = localStorage.getItem('token')\r\n    if(!token)return Promise.reject('Cannot find Token')\r\n    let decode = jwtDecode(token)\r\n// console.log(\"decode   \"+decode)\r\nreturn decode;\r\n}\r\n\r\n/**Authenticate function */\r\nexport async function authenticate(username) {\r\n    try {\r\n        return await axios.post('/api/authenticate', { username })\r\n    } catch (error) {\r\n        return { error: \"Username doesn't exist...!\" }\r\n    }\r\n}\r\n\r\n/**get user details */\r\nexport async function getUser({ username }) {\r\n    try {\r\n        const { data } = await axios.get(`/api/user/${username}`)\r\n        return { data }\r\n    } catch (error) {\r\n        return { error: \"Password doesn't match...!\" }\r\n    }\r\n}\r\n\r\n/**register user function */\r\nexport async function registerUser(credential) {\r\n    try {\r\n\r\n        const { data: { msg }, status } = await axios.post(`/api/register`, credential)\r\n\r\n        let { username, email } = credential;\r\n\r\n        /**send email */\r\n        if (status === 201) {\r\n            await axios.post('/api/registerMail', { username, userEmail:email, text:msg })\r\n        }\r\n\r\n    } catch (error) {\r\n        return Promise.reject({ error })\r\n    }\r\n}\r\n\r\n/**Login function */\r\nexport async function verifyPassword({ username, password }) {\r\n    try {\r\n        if (username) {\r\n            const { data } = await axios.post('/api/login', { username, password })\r\n           console.log(data);\r\n            return Promise.resolve({ data });\r\n        }\r\n    } catch (error) {\r\n        return Promise.reject({ error: \"Password doesn't Match...!\" })\r\n    }\r\n}\r\n\r\n/**update user profile function */\r\nexport async function updateUser(updateData) {\r\n\r\n    // console.log(response);\r\n    try {\r\n        const token = localStorage.getItem('token')\r\n        // const config = {\r\n        //     headers: {\r\n        //         \"Authorization\" : `Bearer ${token}` // Assuming 'token' is the authorization token\r\n        //     },\r\n        //   };\r\n        const response = await axios.put('/api/updateUser',updateData, { headers : { \"Authorization\" : `Bearer ${token}`}})\r\nconsole.log('response'+ response);\r\n        return Promise.resolve({response})  \r\n\r\n    } catch (error) {\r\n        return Promise.reject({ error: \"Couldn't update Profile...!\" })\r\n    }\r\n}\r\n\r\n/**generate OTP */\r\nexport async function generateOTP(username) {\r\n    try {\r\n\r\n        const { data: { code }, status } = await axios.get('/api/generateOTP', { params: { username } })\r\n        // /**send mail with OTP */\r\n        if (status === 201) {\r\n\r\n            let { data } = await getUser({ username });\r\n\r\n            let text = `Your password Recovery OTP is ${code}.Verify and recover your password.`;\r\n            await axios.post('/api/registerMail', { username, userEmail: data.data.email, text, subject: \"Password Recovery OTP\" })\r\n        }\r\n\r\n        return Promise.resolve(code);\r\n\r\n    } catch (error) {\r\n        return Promise.reject({ error })\r\n    }\r\n}\r\n\r\n/**verify OTP */\r\nexport async function verifyOTP({ username, code }) {\r\n    try {\r\n        const { data, status } = await axios.get('/api/verifyOTP', { params: { username, code } })\r\n        return { data, status }\r\n    } catch (error) {\r\n        return Promise.reject(error)\r\n    }\r\n}\r\n\r\n/**reset password */\r\nexport async function resetPassword({ username, password }) {\r\n    try {\r\n        const { data, status } = await axios.put('/api/resetPassword', { username, password });\r\n        return Promise.resolve({ data, status })\r\n    } catch (error) {\r\n        return Promise.reject({ error })\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
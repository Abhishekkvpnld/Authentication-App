{"ast":null,"code":"import axios from \"axios\";\naxios.defaults.baseURL = process.env.REACT_APP_SERVER_DOMAIN;\n\n/**Make api Requests */\n\n/**Authenticate function */\nexport async function authenticate(username) {\n  try {\n    return await axios.post('/api/authenticate', {\n      username\n    });\n  } catch (error) {\n    return {\n      error: \"Username doesn't exist...!\"\n    };\n  }\n}\n\n/**get user details */\nexport async function getUser({\n  username\n}) {\n  try {\n    const {\n      data\n    } = await axios.get(`/api/user/${username}`);\n    return {\n      data\n    };\n  } catch (error) {\n    return {\n      error: \"Password doesn't match...!\"\n    };\n  }\n}\n\n/**register user function */\nexport async function registerUser(credential) {\n  try {\n    const {\n      data: {\n        msg\n      },\n      status\n    } = await axios.post(`/api/register`, credential);\n    let {\n      username,\n      email\n    } = credential;\n\n    /**send email */\n    if (status === 201) {\n      await axios.post('/api/registerMail', {\n        username,\n        userEmail: email,\n        text: msg\n      });\n    }\n  } catch (error) {\n    return Promise.reject({\n      error\n    });\n  }\n}\n\n/**Login function */\nexport async function verifyPassword({\n  username,\n  password\n}) {\n  try {\n    if (username) {\n      const {\n        data\n      } = await axios.post('/api/login', {\n        username,\n        password\n      });\n      return Promise.resolve({\n        data\n      });\n    }\n  } catch (error) {\n    return Promise.reject({\n      error: \"Password doesn't Match...!\"\n    });\n  }\n}\n\n/**update user profile function */\nexport async function updateUser(response) {\n  try {\n    const token = await localStorage.getItem('token');\n    const data = await axios.put('/api/updateUser', response, {\n      headers: {\n        \"Authorization\": `Bearer ${token}`\n      }\n    });\n    return Promise.resolve({\n      data\n    });\n  } catch (error) {\n    return Promise.reject({\n      error: \"Couldn't update Profile...!\"\n    });\n  }\n}\n\n/**generate OTP */\nexport async function generateOTP(username) {\n  try {\n    const {\n      data: {\n        code\n      },\n      status\n    } = await axios.get('/api/generateOTP', {\n      params: {\n        username\n      }\n    });\n\n    /**send mail with OTP */\n    if (status === 201) {\n      let {\n        data: {\n          email\n        }\n      } = await getUser({\n        username\n      });\n      let text = `Your password Recovery OTP is ${code}.Verify and recover your password.`;\n      await axios.post('/api/registerMail', {\n        username,\n        userEmail: email,\n        text,\n        subject: \"Password Recovery OTP\"\n      });\n    }\n    return Promise.resolve(code);\n  } catch (error) {\n    return Promise.reject({\n      error\n    });\n  }\n}\n\n/**verify OTP */\nexport async function verifyOTP({\n  username,\n  code\n}) {\n  try {\n    const {\n      data,\n      status\n    } = await axios.get('/api/verifyOTP', {\n      params: {\n        username,\n        code\n      }\n    });\n    return {\n      data,\n      status\n    };\n  } catch (error) {\n    return Promise.reject(error);\n  }\n}\n\n/**reset password */\nexport async function resetPassword({\n  username,\n  password\n}) {\n  try {\n    const {\n      data,\n      status\n    } = await axios.put('/api/resetPassword', {\n      username,\n      password\n    });\n    return Promise.resolve({\n      data,\n      status\n    });\n  } catch (error) {\n    return Promise.reject({\n      error\n    });\n  }\n}","map":{"version":3,"names":["axios","defaults","baseURL","process","env","REACT_APP_SERVER_DOMAIN","authenticate","username","post","error","getUser","data","get","registerUser","credential","msg","status","email","userEmail","text","Promise","reject","verifyPassword","password","resolve","updateUser","response","token","localStorage","getItem","put","headers","generateOTP","code","params","subject","verifyOTP","resetPassword"],"sources":["C:/Users/JISHN/Documents/projects/Authentication app/client/src/helper/helper.jsx"],"sourcesContent":["import axios from \"axios\";\r\n\r\naxios.defaults.baseURL = process.env.REACT_APP_SERVER_DOMAIN\r\n\r\n/**Make api Requests */\r\n\r\n\r\n/**Authenticate function */\r\nexport async function authenticate(username){\r\ntry{\r\nreturn await axios.post('/api/authenticate',{username})\r\n}catch(error){\r\n    return {error:\"Username doesn't exist...!\"}\r\n}\r\n}\r\n\r\n/**get user details */\r\nexport async function getUser({username}){\r\n    try{\r\nconst {data} = await axios.get(`/api/user/${username}`)\r\nreturn {data}\r\n    }catch(error){\r\n        return {error:\"Password doesn't match...!\"}\r\n    }\r\n}\r\n\r\n/**register user function */\r\nexport async function registerUser(credential){\r\n    try{\r\n\r\nconst {data : {msg}, status} = await axios.post(`/api/register`,credential)\r\n\r\nlet {username , email} = credential;\r\n\r\n/**send email */\r\nif(status === 201){\r\n    await axios.post('/api/registerMail',{username,userEmail : email, text : msg})\r\n}\r\n\r\n    }catch(error){\r\n        return Promise.reject({error})\r\n    }\r\n}\r\n\r\n/**Login function */\r\nexport async function verifyPassword({username,password}){\r\ntry{\r\nif(username){\r\n    const {data} = await axios.post('/api/login',{username,password})\r\n    return Promise.resolve({data});\r\n}\r\n}catch(error){\r\n    return Promise.reject({error:\"Password doesn't Match...!\"})\r\n}\r\n}\r\n\r\n/**update user profile function */\r\nexport async function updateUser(response){\r\n    try{\r\nconst token = await localStorage.getItem('token')\r\nconst data = await axios.put('/api/updateUser',response,{headers:{\"Authorization\":`Bearer ${token}`}})\r\n\r\nreturn Promise.resolve({data})\r\n\r\n    }catch(error){\r\n        return Promise.reject({error:\"Couldn't update Profile...!\"})\r\n    }\r\n}\r\n\r\n/**generate OTP */\r\nexport async function generateOTP(username){\r\n    try{\r\n\r\n        const {data:{code},status} = await axios.get('/api/generateOTP',{params:{username}})\r\n\r\n        /**send mail with OTP */\r\n        if(status === 201){\r\n            let {data:{email}} = await getUser({username});\r\n            let text = `Your password Recovery OTP is ${code}.Verify and recover your password.`;\r\n            await axios.post('/api/registerMail',{username,userEmail:email,text,subject:\"Password Recovery OTP\"})\r\n        }\r\n\r\n        return Promise.resolve(code);\r\n\r\n    }catch(error){\r\nreturn Promise.reject({error})\r\n    }\r\n}\r\n\r\n/**verify OTP */\r\nexport async function verifyOTP({username,code}){\r\n    try{\r\nconst {data,status} = await axios.get('/api/verifyOTP',{params:{username,code}})\r\nreturn {data,status}\r\n    }catch(error){\r\n        return Promise.reject(error)\r\n    }\r\n}\r\n\r\n/**reset password */\r\nexport async function resetPassword({username,password}){\r\n    try{\r\nconst {data,status} = await axios.put('/api/resetPassword',{username,password});\r\nreturn Promise.resolve({data,status})\r\n    }catch(error){\r\n        return Promise.reject({error})\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}